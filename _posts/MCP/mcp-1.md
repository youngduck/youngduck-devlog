---
title: "MCP를 통해 Supabase 테스트서버 1시간만에 무료로 구축하기"
excerpt: "Free 플랜에서도 실서버와 테스트서버를 분리하는 방법을 공유합니다."
coverImage: "/assets/blog/posts/mcp/mcp-1/cover.png"
date: "2025-12-12T14:17:00"
ogImage:
  url: "/assets/blog/posts/mcp/mcp-1/cover.png"
---

> 이 글은 Supabase MCP를 활용하여 Free 플랜에서도 테스트 서버를 구축한 경험을 정리한 글입니다.

## 테스트 서버 구축이 필요한 시기

안녕하세요! YD-Tech 개발자 김영덕입니다.
&nbsp;

제가 사이드 프로젝트로 운영 중인 보돌코 스코어드는 초기 런칭을 진행하면서 Supabase를 데이터베이스로 사용하고 있었습니다. 서비스 런칭 이후 추가 기능을 개발하려니 실데이터에 영향을 줄 수 있다 생각하여 매우 조심스러웠습니다.

&nbsp;

특히 스키마 구조 변경 같은 작업은 실서버 데이터를 안전하게 유지하면서 관리하기에 부담이 있었습니다. 그래서 사이드 프로젝트에도 테스트 서버를 구축하는 것이 좋겠다고 생각하게 되었습니다.

## Supabase Branch 기능, Free 플랜에서는 사용 불가

테스트 서버를 구축하기 위해 Supabase에서 제공하는 기능이 있는지 먼저 찾아보았습니다.

&nbsp;

찾아보니 **Supabase Branch**라는 기능이 있었습니다. Git과 유사하게 브랜치를 제공하는 방식을 통해 실제 데이터를 건드리지 않고 개발할 수 있는 기능이었습니다. 프로젝트에 연결되어 있는 Supabase MCP를 통해 테스트용 브랜치를 생성해 보려했지만, 제가 사용하고 있는 Free 플랜에서는 브랜치 기능을 사용할 수 없었습니다.

실제로 Supabase 공식 사이트에서 확인해보니, Branch 기능은 Pro 플랜 이상에서만 제공되며 시간에 따라 추가 과금이 진행되는 것을 확인할 수 있었습니다.

![Supabase 요금정책](/assets/blog/posts/mcp/mcp-1/2.png)

## Pro로 업그레이드할까, 말까?

보돌코 스코어드는 약 100명의 누적 사용자가 있고, DB 사용량이나 S3 용량 등은 Free 플랜으로도 충분히 사용 가능한 아주 작은 서비스인 상황입니다. 그래서 Branch 기능 사용만을 위해 Pro로 업그레이드하기보다는 다른 방법을 찾는 것이 낫겠다고 생각했습니다.

&nbsp;

제일 먼저 든 생각은 똑같은 Supabase 프로젝트를 새로 만들어서 dev, prod 환경에 따라 작업하는 것이었는데요. 인프라 비용은 0이겠지만, 현재 운영 중인 DB 스키마, RLS 관련 정책 등을 일일이 옮겨서 만들어줘야 하고, 이후 유지보수 간에도 두 곳을 모두 신경 써야 해서 시간 비용이 많이 들 것으로 생각되었습니다. 이럴때 필요한게 AI의 생산성이라 생각하여 SUPABASE MCP를 설치하여 시간비용을 최소화 해보자 했습니다.

## Supabase MCP는 이런 작업을 순식간에 해줍니다

Supabase MCP 기능들에는 제가 하려는 작업들을 모두 지원해주고 있었습니다. Supabase MCP는 제 루트 계정을 참조하도록 설정해놓았기 때문에 프로젝트를 넘나들면서 작업할 수 있었고, 프로젝트 생성부터 DB 스키마, RLS 정책 클론, 데이터 이관 등 단순 반복 작업들을 순식간에 처리할 수 있었습니다.

![MCP가 스스로 만든 프로젝트 레포](/assets/blog/posts/mcp/mcp-1/3.png)

이렇게 만들어진 Supabase 프로젝트를 **.env.dev**, **.env.prod**로 목적에 맞게 사용할 수 있게 환경 분리를 해주었습니다.

### 1. MCP가 클론해주는 TABLE, RPC, RLS 정책

![RPC 클론 뚝딱 (TABLE, RLS도 마찬가지)](/assets/blog/posts/mcp/mcp-1/4.png)

프로덕션 서버의 모든 테이블 스키마, RPC 함수(약 40개 이상), 그리고 RLS 정책을 MCP를 통해 한 번에 테스트 서버로 복사할 수 있었습니다. 특히 RPC 함수의 경우 **SECURITY DEFINER** 설정까지 프로덕션과 동일하게 맞춰주어야 하는데, MCP를 통해 프로덕션의 함수 정의를 그대로 가져와 적용할 수 있어서 매우 편리했습니다.

### 2. MCP가 마이그레이션해주는 테이블 데이터

![테이블 데이터 이관 뚝딱](/assets/blog/posts/mcp/mcp-1/5.png)

초기 테스트를 위해 필요한 마스터 데이터들(positions, players, teams, competitions)도 MCP를 통해 프로덕션에서 테스트 서버로 쉽게 이관할 수 있었습니다.

## Supabase MCP가 미처 못해준 것들

Supabase에서 제공해주는 MCP 툴 중에서는 아직 OAuth 관련 기능을 제어할 수 없었습니다. 마찬가지로 Supabase 대시보드에는 있지만 MCP에서 제공하지 않는 기능들은 대시보드 접근을 통해 작업을 해줘야 할 거에요.

&nbsp;

저는 로그인에 카카오 로그인과 Supabase에서 제공해주는 익명 로그인을 사용하고 있었기 때문에, 테스트 서버에서도 이를 사용하기 위해 Supabase 대시보드와 카카오 개발자 콘솔에 직접 추가를 해주었습니다.

![카카오 개발자 콘솔에서 설정중](/assets/blog/posts/mcp/mcp-1/6.png)

테스트 서버의 Redirect URL을 카카오 개발자 콘솔에 추가하고, Supabase 대시보드에서도 OAuth Provider 설정과 Redirect URL을 구성해주었습니다.

## MCP를 통해 배운 것들

이렇게 MCP를 통해 테스트 서버를 구축하면서 놀라운 생산성 향상을 경험할 수 있었습니다.

&nbsp;

처음에는 "수동으로 스키마를 옮기고 RPC 함수를 하나하나 복사해야 하는데, 이게 얼마나 걸릴까?"라고 생각했었는데, 실제로 MCP를 사용해보니 프로덕션 서버의 모든 스키마, RPC 함수, RLS 정책, 필요한 데이터들을 테스트 서버로 복사하는 작업이 **말 그대로 몇 분 만에** 끝나버렸습니다.

&nbsp;

이런 경험을 통해 앞으로는 테스트 서버에서 개발을 완료한 후, 그 변경사항을 MCP를 통해 프로덕션 서버에도 쉽게 적용할 수 있을 것 같습니다. 테스트 서버에서 스키마 변경이나 새로운 RPC 함수를 추가하고 검증한 뒤, MCP에게 "이 변경사항을 프로덕션에도 적용해줘"라고 요청하면 되는 것이죠.

![정상적으로 작동하는 테스트 서버 관리자 화면](/assets/blog/posts/mcp/mcp-1/7.png)

혹시 Supabase MCP나 테스트 서버 구축에 관한 질문이 있으시면 언제든지 댓글로 남겨주세요!
